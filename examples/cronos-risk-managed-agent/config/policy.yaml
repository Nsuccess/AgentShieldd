# AgentARC Policy Configuration for Cronos x402 Demo
# This policy protects AI agents from malicious transactions

# Stage 1: LLM Intent Judge
llm_judge:
  enabled: true
  provider: "groq"  # Using Groq for 10x faster validation!
  model: "llama-3.3-70b-versatile"
  api_key_env: "GROQ_API_KEY"
  prompt: |
    You are a security validator for blockchain transactions.
    Analyze if this transaction intent is safe and legitimate.
    
    Transaction: {transaction}
    User Intent: {context}
    
    Respond with JSON:
    {
      "safe": true/false,
      "reason": "explanation",
      "risk_level": "low/medium/high"
    }

# Stage 2: Policy Validation Rules
rules:
  # Maximum transfer amounts (in base units)
  max_transfer_amount:
    USDC: "100000000"  # 100 USDC
    CRO: "10000000000000000000000"  # 10,000 CRO
    TCRO: "10000000000000000000000"  # 10,000 TCRO
  
  # Whitelist of approved addresses
  whitelist:
    - "0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb"  # Example safe address
    - "0x0000000000000000000000000000000000000000"  # Burn address
  
  # Blacklist of known malicious addresses
  blacklist:
    - "0xHONEYPOT_ADDRESS"  # Example honeypot
  
  # Allowed function signatures
  allowed_functions:
    - "transfer(address,uint256)"
    - "approve(address,uint256)"
    - "transferFrom(address,address,uint256)"
  
  # Blocked function signatures (dangerous)
  blocked_functions:
    - "delegatecall"
    - "selfdestruct"

# Stage 3: Tenderly Simulation
simulation:
  enabled: true
  provider: "tenderly"
  api_key_env: "TENDERLY_API_KEY"
  network: "cronos-testnet"
  
  # Stage 3.5: Honeypot Detection
  honeypot_detection:
    enabled: true
    method: "buy_sell_simulation"
    description: "Simulates BUY â†’ SELL to detect scam tokens"
    
    # If sell fails or returns <90% of buy amount, it's a honeypot
    min_sell_ratio: 0.9
    
    # Test with small amount
    test_amount: "1000000"  # 1 USDC

# Stage 4: LLM Analysis of Simulation Results
llm_analysis:
  enabled: true
  provider: "groq"
  model: "llama-3.3-70b-versatile"
  api_key_env: "GROQ_API_KEY"
  prompt: |
    You are analyzing a blockchain transaction simulation.
    
    Simulation Results: {simulation}
    Transaction: {transaction}
    
    Analyze for:
    - Unexpected state changes
    - Hidden approvals
    - Suspicious events
    - Gas anomalies
    
    Respond with JSON:
    {
      "safe": true/false,
      "reason": "explanation",
      "warnings": ["list of warnings"]
    }

# Network Configuration
networks:
  cronos-testnet:
    chain_id: 338
    rpc_url: "https://evm-t3.cronos.org/"
    explorer: "https://explorer.cronos.org/testnet"
    
    # Native token
    native_token:
      symbol: "TCRO"
      decimals: 18
    
    # Supported tokens
    tokens:
      USDC.e:
        address: "0x9e0e7a0C8688b1A4e46b5F4D0A4F6B8F5C8E5D4C"
        decimals: 6
        name: "Bridged USDC (Stargate)"
  
  cronos-mainnet:
    chain_id: 25
    rpc_url: "https://evm.cronos.org/"
    explorer: "https://explorer.cronos.org"
    
    native_token:
      symbol: "CRO"
      decimals: 18
    
    tokens:
      USDC.e:
        address: "0xc21223249CA28397B4B6541dfFaEcC539BfF0141"
        decimals: 6
        name: "Bridged USDC (Stargate)"

# Logging Configuration
logging:
  level: "INFO"
  format: "json"
  output: "logs/agentarc.log"
  
  # Log all blocked transactions
  log_blocked: true
  
  # Log all approved transactions
  log_approved: true
  
  # Include validation details
  include_validation_details: true

# Performance Settings
performance:
  # Timeout for each stage (seconds)
  stage_timeout: 30
  
  # Total validation timeout (seconds)
  total_timeout: 120
  
  # Enable caching of validation results
  cache_enabled: true
  cache_ttl: 300  # 5 minutes
  
  # Parallel execution of independent stages
  parallel_execution: true

# Demo Mode Settings
demo:
  # Skip actual blockchain calls in demo
  mock_blockchain: false
  
  # Use testnet by default
  default_network: "cronos-testnet"
  
  # Verbose output for demos
  verbose: true
